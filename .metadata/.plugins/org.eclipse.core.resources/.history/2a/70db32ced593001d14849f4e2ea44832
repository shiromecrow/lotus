/*
 * PID_EncoderGyro.c
 *
 *  Created on: Jan 14, 2023
 *      Author: sf199
 */

#include "PID_EncoderGyro.h"
#include "CL_encoder.h"
#include "CL_gyro.h"
#include "PL_LED.h"
#include "define.h"

//#include "fail_safe.h"

#include "stdio.h"
#include "math.h"


struct PID enc;
struct PID Gyro;

float Ksp,Ksi,Ksd;
float Ktp,Kti,Ktd;

void PID_Init(void){

	modeacc = 0;
	g_MotorEnd_flag=0;
	mollifier_timer=0;
	noGoalPillarMode=0;

	Ksp = 3.1;//3//P項の制御量直進*****************************************************
	Ksi = 0.08;//80//5//43//I項の制御量直進*****************************************************
	Ksd = 0.00;//D項の制御量直進*****************************************************
	Ktp = 1.9;//295//P項の制御量旋回*****************************************************
	Kti = 0.13;//1//.6//I項の制御量旋回*****************************************************
//	Ktifun = 0.01;//1//.6//I項の制御量旋回*****************************************************
	Ktd = 0.002;//205//D項の制御量旋回*****************************************************
//#define Ksp 0.029//3//P項の制御量直進*****************************************************
//#define Ksi 0.0004//5//43//I項の制御量直進*****************************************************
//#define Ksd 0.00//D項の制御量直進*****************************************************
//#define Ktp 0.0145//295//P項の制御量旋回*****************************************************
//#define Kti 0.001//1//.6//I項の制御量旋回*****************************************************
//#define Ktd 0.00//205//D項の制御量旋回*****************************************************

	Ksp_dis = 1;//3//P項の制御量直進*****************************************************
	Ksi_dis = 0.02;//5//43//I項の制御量直進*****************************************************
	Ksd_dis = 0.00;//D項の制御量直進*****************************************************
	Ktp_angle = 0.21;//295//P項の制御量旋回*****************************************************
	Kti_angle = 0.003;//1//.6//I項の制御量旋回*****************************************************
	Ktd_angle = 0.005;//205//D項の制御量旋回*****************************************************

}
